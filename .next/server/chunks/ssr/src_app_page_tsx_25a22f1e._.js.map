{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/garage-copied/src/app/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/context/AuthProvider';\nimport { Loader2 } from 'lucide-react';\n\nexport default function HomePage() {\n  const router = useRouter();\n  const { role, loading: authLoading, isAuthenticated, viewAsRole } = useAuth();\n\n  useEffect(() => {\n    // Only perform redirects if the authentication status is fully loaded\n    if (!authLoading) {\n      if (!isAuthenticated) {\n        // If not authenticated, always send to login\n        router.replace('/login');\n        return;\n      }\n      \n      // If authenticated, wait until the role is determined before redirecting\n      if (role) {\n          const effectiveRole = viewAsRole || role;\n\n          switch (effectiveRole) {\n            case \"admin\":\n              router.replace(\"/dashboard\");\n              break;\n            case \"technician\":\n              router.replace(\"/human-resources/attendance\");\n              break;\n            case \"customer\":\n              router.replace(\"/customers/dashboard\");\n              break;\n            default:\n              // Fallback if role is somehow invalid\n              router.replace(\"/login\");\n              break;\n          }\n      }\n      // If auth is loaded, user is authenticated, but role is still null,\n      // this component will just continue showing the loading spinner,\n      // preventing any premature redirects.\n    }\n  }, [role, authLoading, isAuthenticated, router, viewAsRole]);\n\n  return (\n    <div className=\"flex h-screen w-full items-center justify-center bg-background\">\n        <Loader2 className=\"h-8 w-8 animate-spin mr-2\" />\n        <p className=\"ml-2\">Loading Application...</p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,eAAe,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAE1E,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,sEAAsE;QACtE,IAAI,CAAC,aAAa;YAChB,IAAI,CAAC,iBAAiB;gBACpB,6CAA6C;gBAC7C,OAAO,OAAO,CAAC;gBACf;YACF;YAEA,yEAAyE;YACzE,IAAI,MAAM;gBACN,MAAM,gBAAgB,cAAc;gBAEpC,OAAQ;oBACN,KAAK;wBACH,OAAO,OAAO,CAAC;wBACf;oBACF,KAAK;wBACH,OAAO,OAAO,CAAC;wBACf;oBACF,KAAK;wBACH,OAAO,OAAO,CAAC;wBACf;oBACF;wBACE,sCAAsC;wBACtC,OAAO,OAAO,CAAC;wBACf;gBACJ;YACJ;QACA,oEAAoE;QACpE,iEAAiE;QACjE,sCAAsC;QACxC;IACF,GAAG;QAAC;QAAM;QAAa;QAAiB;QAAQ;KAAW;IAE3D,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC,iNAAA,CAAA,UAAO;gBAAC,WAAU;;;;;;0BACnB,8OAAC;gBAAE,WAAU;0BAAO;;;;;;;;;;;;AAG5B","debugId":null}}]
}